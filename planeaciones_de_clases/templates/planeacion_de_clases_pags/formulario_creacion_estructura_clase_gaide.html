{% extends 'base.html' %}

{% block title %}Crear Estructura de Clase - Gaide{% endblock %}

{% block content %}
<div class="container-fluid py-4">
    <div class="row justify-content-center">
        <div class="col-xl-9 col-lg-11">
            <div class="card shadow-lg border-0 rounded-3">
                <div class="card-header bg-primary bg-gradient text-white py-3">
                    <h3 class="card-title mb-0 d-flex align-items-center">
                        <i class="bi bi-robot me-2"></i> Nueva Estructura con Gaide
                    </h3>
                </div>
                
                <div class="card-body p-4 p-md-5">
                    <div class="mb-4">
                        <h5 class="text-dark fw-bold">Configuraci칩n Pedag칩gica</h5>
                        <p class="text-muted small">Gaide utilizar치 estos datos para proponer una estructura de clase alineada a tus objetivos.</p>
                        <hr>
                    </div>

                    <form method="post" id="formGaide" novalidate>
                        {% csrf_token %}

                        <div class="row g-3 mb-4">
                            <div class="col-md-6">
                                <label for="{{ form.grado.id_for_label }}" class="form-label fw-bold text-secondary">
                                    <i class="bi bi-mortarboard me-1"></i> {{ form.grado.label }}
                                </label>
                                {{ form.grado }}
                                {% if form.grado.errors %}
                                    <div class="text-danger small mt-1 animate__animated animate__fadeIn">
                                        {{ form.grado.errors.0 }}
                                    </div>
                                {% endif %}
                            </div>
                            <div class="col-md-6">
                                <label for="{{ form.area.id_for_label }}" class="form-label fw-bold text-secondary">
                                    <i class="bi bi-book me-1"></i> {{ form.area.label }}
                                </label>
                                {{ form.area }}
                                {% if form.area.errors %}
                                    <div class="text-danger small mt-1 animate__animated animate__fadeIn">
                                        {{ form.area.errors.0 }}
                                    </div>
                                {% endif %}
                            </div>
                        </div>

                        <div class="row g-3 mb-4">
                            <div class="col-md-8">
                                <label for="{{ form.tema.id_for_label }}" class="form-label fw-bold text-secondary">
                                    <i class="bi bi-bookmark-check me-1"></i> {{ form.tema.label }}
                                </label>
                                {{ form.tema }}
                                {% if form.tema.errors %}<div class="text-danger small mt-1">{{ form.tema.errors.0 }}</div>{% endif %}
                            </div>
                            <div class="col-md-4">
                                <label for="{{ form.duracion_clase.id_for_label }}" class="form-label fw-bold text-secondary">
                                    <i class="bi bi-clock me-1"></i> {{ form.duracion_clase.label }}
                                </label>
                                {{ form.duracion_clase }}
                                {% if form.duracion_clase.errors %}<div class="text-danger small mt-1">{{ form.duracion_clase.errors.0 }}</div>{% endif %}
                            </div>
                        </div>

                        <div class="mb-4">
                            <label for="{{ form.nivel_grupo.id_for_label }}" class="form-label fw-bold text-secondary">
                                <i class="bi bi-bar-chart me-1"></i> {{ form.nivel_grupo.label }}
                            </label>
                            {{ form.nivel_grupo }}
                            {% if form.nivel_grupo.errors %}<div class="text-danger small mt-1">{{ form.nivel_grupo.errors.0 }}</div>{% endif %}
                        </div>

                        <div class="row g-3 mb-4">
                            <div class="col-12">
                                <label for="{{ form.competencia.id_for_label }}" class="form-label fw-bold text-secondary">{{ form.competencia.label }}</label>
                                {{ form.competencia }}
                                {% if form.competencia.errors %}<div class="text-danger small mt-1">{{ form.competencia.errors.0 }}</div>{% endif %}
                            </div>
                            <div class="col-12">
                                <label for="{{ form.objetivo_aprendizaje.id_for_label }}" class="form-label fw-bold text-secondary">{{ form.objetivo_aprendizaje.label }}</label>
                                {{ form.objetivo_aprendizaje }}
                                {% if form.objetivo_aprendizaje.errors %}<div class="text-danger small mt-1">{{ form.objetivo_aprendizaje.errors.0 }}</div>{% endif %}
                            </div>
                            <div class="col-12">
                                <label for="{{ form.informacion_adicional.id_for_label }}" class="form-label fw-bold text-secondary">{{ form.informacion_adicional.label }}</label>
                                {{ form.informacion_adicional }}
                                {% if form.informacion_adicional.errors %}<div class="text-danger small mt-1">{{ form.informacion_adicional.errors.0 }}</div>{% endif %}
                            </div>
                        </div>

                        <div class="d-flex justify-content-between align-items-center mt-5 border-top pt-4">
                            <a href="{% url 'principal' %}" class="btn btn-link text-decoration-none text-muted">
                                <i class="bi bi-arrow-left"></i> Volver al panel
                            </a>
                            <div class="d-flex gap-2">
                                <button type="reset" class="btn btn-light border px-4">Limpiar</button>
                                <button type="submit" class="btn btn-primary px-5 shadow-sm fw-bold" id="btnGenerar">
                                    <i class="bi bi-magic"></i> Generar con Gaide
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    // Mejora del feedback visual al enviar
    document.getElementById('formGaide').addEventListener('submit', function(e) {
        const btn = document.getElementById('btnGenerar');
        
        // Si el formulario es v치lido (HTML5 validation)
        if (this.checkValidity()) {
            btn.innerHTML = '<span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span> IA Pensando...';
            btn.classList.add('disabled');
            btn.style.pointerEvents = 'none';
        }
    });
</script>
{% endblock %}